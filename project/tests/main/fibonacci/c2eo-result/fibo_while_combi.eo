+package c2eo.src.main.fibonacci.fibo_while_combi
+alias c2eo.coperators.add
+alias c2eo.system.address
+alias c2eo.coperators.less
+alias c2eo.coperators.post-inc-int64
+alias c2eo.stdio.printf
+alias c2eo.system.ram
+alias c2eo.coperators.read-as-int64
+alias c2eo.coperators.while
+alias c2eo.coperators.write
+alias c2eo.coperators.write-as-int64

[args...] > global
  ram > global-ram
    2048
  memory > empty-global-position
  ram > return-ram
    2048
  memory > return-mem_size
  address > return
    return-ram
    0
  address > s-p1
    global-ram
    0
  address > s-p2
    global-ram
    8
  address > g-arg
    global-ram
    16
  address > g-result
    global-ram
    24
  [param-start param-size] > f-fibo
    add > local-start
      param-start
      param-size
    add > empty-local-position
      local-start
      8
    address > l-i
      global-ram
      add
        local-start
        0
    seq > @
      write
        l-i
        1
      while
        less
          read-as-int64
            l-i
          read-as-int64
            g-arg
        seq
          write-as-int64
            g-result
            add
              read-as-int64
                s-p1
              read-as-int64
                s-p2
          write-as-int64
            s-p1
            read-as-int64
              s-p2
          write-as-int64
            s-p2
            read-as-int64
              g-result
          post-inc-int64
            l-i
          TRUE
      TRUE
  [param-start param-size] > main
    add > local-start
      param-start
      param-size
    add > empty-local-position
      local-start
      0
    seq > @
      write-as-int64
        g-arg
        10
      seq
        ^.f-fibo
          empty-local-position
          0
        TRUE
      printf
        "%d\n"
        read-as-int64
          g-arg
      printf
        "%d\n"
        read-as-int64
          g-result
      write
        return
        0
      TRUE
  seq > @
    write
      s-p1
      0
    write
      s-p2
      1
    write
      g-arg
      0
    write
      g-result
      0
    main
      32
      0
    TRUE
